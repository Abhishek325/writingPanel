<html lang="en"><head> 
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="">
    <meta name="author" content=""> 
    <title>MediaWriting</title> 
    <!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
        <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
        <script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
    <![endif]-->
    <link href="/members/Static/VA/css/bootstrap.min.css" rel="stylesheet" id="bootstrap-css">
    <link href="https://fonts.googleapis.com/css?family=Open+Sans:300" rel="stylesheet">
    <link href="/members/Static/VA/css/style-login.css" rel="stylesheet">
    <script src="/members/Static/VA/js/jquery-1.11.0.js"></script>
    <script src="/members/Static/VA/js/bootstrap.min.js"></script>
    <script type="text/javascript">
        window.alert = function(){};
        var defaultCSS = document.getElementById('bootstrap-css');
        function changeCSS(css){
            if(css) $('head > link').filter(':first').replaceWith('<link rel="stylesheet" href="'+ css +'" type="text/css" />'); 
            else $('head > link').filter(':first').replaceWith(defaultCSS); 
        }
        $( document ).ready(function() {
          var iframe_height = parseInt($('html').height()); 
        });
    </script>
</head> 
<body>
    <div class="container">
        <div class="row">
            <div class="col-md-4 col-md-offset-4">
                <div class="panel panel-login">
                    <div class="panel-heading">
                        <div class="row">
                            <div class="col-xs-6">
                                <a href="#" class="active" id="login-form-link" style="font-family: 'Open Sans', sans-serif;">Login</a>
                            </div>
                            <div class="col-xs-6">
                                <a href="#" id="register-form-link" style="font-family: 'Open Sans', sans-serif;">Register</a>
                            </div>
                        </div>
                        <hr>
                    </div>
                    <div class="panel-body">
                        <div class="row">
                        <?php 
                        if(isset($successMsg))  
                        {
                         echo $successMsg;
                        }
                        ?>
                            <div class="col-lg-12">
                                <form id="login-form" action="/members/login" method="post">
                                    <div class="form-group"> 
                                        <input tabindex="1" class="form-control" type="text" placeholder="Username" name="uname">
                                    </div>
                                    <div class="form-group">
                                        <input tabindex="1" class="form-control" type="password" placeholder="Password" name="upwd">
                                    </div> 
                                    <?php 
                                    if(isset($errMsg))
                                    {
                                      echo $errMsg;
                                    } 
                                    ?>
                                    <div class="form-group">
                                        <div class="row">
                                            <div class="col-sm-6 col-sm-offset-3">
                                                <button tabindex="4" class="form-control btn btn-login"  type="submit">Login now</button><br>
                                            </div>
                                        </div>
                                    </div>
                                </form>
                                <form id="register-form" action="/members/register" method="post"  style="display:none;">
                                    <div class="form-group">
                                        <input type="text" placeholder="Full name" name="name" required tabindex="1" class="form-control">
                                    </div>
                                    <div class="form-group">
                                    <p id="emailstatus" style="font-family: 'Open Sans', sans-serif;"></p>
                                        <input type="email" placeholder="Email" name="email" id="email" required tabindex="1" onblur="checkEmailFunction(this.value)" class="form-control">
                                    </div>
                                    <div class="form-group">
                                    <p id="userstatus" style="font-family: 'Open Sans', sans-serif;"></p>
                                        <input type="text" placeholder="Username" name="username" id="username" pattern="[A-za-z]{1}.*" onblur="checkNameFunction(this.value)" required tabindex="1" class="form-control">
                                    </div>
                                    <div class="form-group">
                                        <input type="password" placeholder="Password" name="pwd"  pattern=".{8,}" required tabindex="1" class="form-control">
                                    </div>
                                    <div class="form-group">
                                        <input type="password" placeholder="Confirm Password" name="pwdn" pattern=".{8,}" required tabindex="1" class="form-control">
                                    </div>
                                    <div class="form-group">
                                        <div class="row">
                                            <div class="col-sm-6 col-sm-offset-3">
                                                <button type="submit" name="register-submit" id="register-submit" tabindex="4" class="form-control btn btn-register" >Register </button>
                                            </div>
                                        </div>
                                    </div>
                                </form>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <footer>
    <section id="contact">
        <div class="container">
            <div class="row">
                <div class="col-lg-10 col-lg-offset-1 text-center">
                    <h4 style="font-family: 'Open Sans', sans-serif;"><strong>MediaWriting</strong></h4>
                     
                    <!--We are here, to read you. 
                    <ul class="list-unstyled">
                        <li><i class="fa fa-phone fa-fw"></i> (+91) 9999999999</li>
                        <li><i class="fa fa-envelope-o fa-fw"></i>  <a href="mailto:name@example.com">somemailid@gmail.com</a>
                        </li>
                    </ul> 
                    <hr>--> 
                </div>
            </div>
        </div>
        </section>
    </footer>   
    <script type="text/javascript">
    $(function() {
        $('#login-form-link').click(function(e) {
            $("#login-form").delay(100).fadeIn(100);
            $("#register-form").fadeOut(100);
            $('#register-form-link').removeClass('active');
            $(this).addClass('active');
            e.preventDefault();
        });
        $('#register-form-link').click(function(e) {
            $("#register-form").delay(100).fadeIn(100);
            $("#login-form").fadeOut(100);
            $('#login-form-link').removeClass('active');
            $(this).addClass('active');
            e.preventDefault();
        });

    });
    </script>
    <script type="text/javascript">
        function checkNameFunction(value){
            var ajaxRequest; // The variable that makes Ajax possible!  
            try{
            // Opera 8.0+, Firefox, Safari
            ajaxRequest = new XMLHttpRequest();
            }catch (e){
            // Internet Explorer Browsers
            try{
            ajaxRequest = new ActiveXObject('Msxml2.XMLHTTP');
            }catch (e) {
            try{
            ajaxRequest = new ActiveXObject('Microsoft.XMLHTTP');
            }catch (e){
            // Something went wrong
            alert('Your browser broke!');
            return false;
            }
            }
            }  
          ajaxRequest.onreadystatechange = function(){
          if(ajaxRequest.readyState == 4){   
           if(isNaN(ajaxRequest.responseText))
            { 
             //change this on bootstrap
             document.getElementById('userstatus').innerHTML=ajaxRequest.responseText;    
             document.getElementById('username').focus();
            }
            else
            {
                document.getElementById('userstatus').innerHTML="";    
            }
            var res=ajaxRequest.responseText;  
           }
        }  
        var queryString = '?username=' + value ; 
        ajaxRequest.open('GET', '/members/checkUserName' + queryString, true);
        ajaxRequest.send(null);
        }     

        function checkEmailFunction(value){
            var ajaxRequest; // The variable that makes Ajax possible!  
            try{
            // Opera 8.0+, Firefox, Safari
            ajaxRequest = new XMLHttpRequest();
            }catch (e){
            // Internet Explorer Browsers
            try{
            ajaxRequest = new ActiveXObject('Msxml2.XMLHTTP');
            }catch (e) {
            try{
            ajaxRequest = new ActiveXObject('Microsoft.XMLHTTP');
            }catch (e){
            // Something went wrong
            alert('Your browser broke!');
            return false;
            }
            }
            }  
          ajaxRequest.onreadystatechange = function(){
          if(ajaxRequest.readyState == 4){   
           if(isNaN(ajaxRequest.responseText))
            { 
             //change this on bootstrap
             document.getElementById('emailstatus').innerHTML=ajaxRequest.responseText;    
             document.getElementById('email').focus();
            }
            else
            {
                document.getElementById('emailstatus').innerHTML="";    
            }
            var res=ajaxRequest.responseText;  
           }
        }  
        var queryString = '?email=' + value ; 
        ajaxRequest.open('GET', '/members/checkUserEmail' + queryString, true);
        ajaxRequest.send(null);
        }     
    </script>
</body>
</html>

